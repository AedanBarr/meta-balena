if [ "$#" -ne 2 -o -z "$API_ENDPOINT" -o -z "$DEVICE_ID" -o -z "$API_KEY" ]; then
	echo "Usage: $0 PERCENTAGE STATE"
	echo -e "\tPERCENTAGE\tExample: 50"
	echo -e "\tSTATE\tExample: Loading filesystem"
	echo "Requires API_ENDPOINT DEVICE_ID and API_KEY environment variables to be set."
	exit 1
fi

percentage=$1
state=$2

curl -X PATCH "$API_ENDPOINT/ewa/device($DEVICE_ID)?apikey=$API_KEY" \
     --data-urlencode "provisioning_progress=$percentage" \
     --data-urlencode "provisioning_state=$state"
